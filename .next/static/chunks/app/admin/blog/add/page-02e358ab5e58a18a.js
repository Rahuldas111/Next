(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[15],{2453:function(e,a,s){Promise.resolve().then(s.bind(s,8855))},8855:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return c}});var l=s(7437),t=s(7138),i=s(6463),n=s(2265);function c(){let e=(0,i.useRouter)(),[a,s]=(0,n.useState)([]),[c,r]=(0,n.useState)([]),[o,d]=(0,n.useState)({cat_id:"",sub_cat_id:"",title:"",description:"",image:""}),[m,u]=(0,n.useState)(!1),[h,b]=(0,n.useState)(null);(0,n.useEffect)(()=>{j()},[]);let j=async()=>{let e=await fetch("../../api/admin/category",{method:"GET"});e.ok?s((await e.json()).category):b((await e.json()).message)},x=async e=>{let a=await fetch("../../api/admin/sub-cat-list-by-cat/".concat(e),{method:"GET"});a.ok?r((await a.json()).Subcategory):b((await a.json()).message)},p=e=>{if("cat_id"===e.target.name)d(a=>({...a,[e.target.name]:e.target.value})),""!==e.target.value?x(e.target.value):r([]);else if("image"===e.target.name){var a;let s=e.target;if(null===(a=s.files)||void 0===a?void 0:a[0]){let e=s.files[0];d(a=>({...a,image:e}))}else d(e=>({...e,image:""}))}else d(a=>({...a,[e.target.name]:e.target.value}))},g=async a=>{a.preventDefault(),u(!0);try{let a=new FormData;a.append("cat_id",o.cat_id),a.append("sub_cat_id",o.sub_cat_id),a.append("title",o.title),a.append("description",o.description),a.append("image",o.image);let s=await fetch("../../api/admin/blog/add",{method:"POST",body:a});if(s.ok)u(!1),b(null),e.replace("/admin/blog");else{let e=await s.json();b(e.message),u(!1)}}catch(e){b(null==e?void 0:e.message),u(!1)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"pagetitle",children:[(0,l.jsx)("h1",{children:"Blog"}),(0,l.jsx)("nav",{children:(0,l.jsxs)("ol",{className:"breadcrumb",children:[(0,l.jsx)("li",{className:"breadcrumb-item",children:(0,l.jsx)(t.default,{href:"/admin",children:"Home"})}),(0,l.jsx)("li",{className:"breadcrumb-item",children:(0,l.jsx)(t.default,{href:"/admin/blog",children:"Blog"})}),(0,l.jsx)("li",{className:"breadcrumb-item active",children:"Add"})]})})]}),(0,l.jsx)("section",{className:"section",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsxs)("div",{className:"col-lg-12",children:[h&&(0,l.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[h,(0,l.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]}),(0,l.jsx)("div",{className:"card",children:(0,l.jsxs)("div",{className:"card-body",children:[(0,l.jsx)("h5",{className:"card-title",children:"Blog Insert"}),(0,l.jsxs)("form",{onSubmit:g,children:[(0,l.jsxs)("div",{className:"row mb-3",children:[(0,l.jsx)("label",{htmlFor:"inputEmail3",className:"col-sm-2 col-form-label",children:"Category Name"}),(0,l.jsx)("div",{className:"col-sm-10",children:(0,l.jsxs)("select",{id:"inputState",className:"form-select",name:"cat_id",onChange:e=>p(e),children:[(0,l.jsx)("option",{value:"",children:"Choose Category"},"0"),(null==a?void 0:a.length)>0&&(null==a?void 0:a.map((e,a)=>(0,l.jsx)("option",{value:e.id,children:e.name},a+1)))]})})]}),(0,l.jsxs)("div",{className:"row mb-3",children:[(0,l.jsx)("label",{htmlFor:"inputEmail3",className:"col-sm-2 col-form-label",children:"SubCategory Name"}),(0,l.jsx)("div",{className:"col-sm-10",children:(0,l.jsxs)("select",{id:"inputState",className:"form-select",name:"sub_cat_id",onChange:e=>p(e),children:[(0,l.jsx)("option",{value:"",children:"Choose SubCategory"},"0"),(null==c?void 0:c.length)>0&&(null==c?void 0:c.map((e,a)=>(0,l.jsx)("option",{value:e.id,children:e.name},a+1)))]})})]}),(0,l.jsxs)("div",{className:"row mb-3",children:[(0,l.jsx)("label",{htmlFor:"inputEmail3",className:"col-sm-2 col-form-label",children:"Title"}),(0,l.jsx)("div",{className:"col-sm-10",children:(0,l.jsx)("input",{type:"text",className:"form-control",id:"title",name:"title",onChange:e=>p(e)})})]}),(0,l.jsxs)("div",{className:"row mb-3",children:[(0,l.jsx)("label",{htmlFor:"inputEmail3",className:"col-sm-2 col-form-label",children:"Description"}),(0,l.jsx)("div",{className:"col-sm-10",children:(0,l.jsx)("input",{type:"text",className:"form-control",id:"description",name:"description",onChange:e=>p(e)})})]}),(0,l.jsxs)("div",{className:"row mb-3",children:[(0,l.jsx)("label",{htmlFor:"inputEmail3",className:"col-sm-2 col-form-label",children:"Image"}),(0,l.jsx)("div",{className:"col-sm-10",children:(0,l.jsx)("input",{type:"file",className:"form-control",id:"image",name:"image",onChange:e=>p(e)})})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:m,children:m?"Loading...":"Insert"}),(0,l.jsx)("button",{type:"reset",className:"btn btn-secondary",children:"Reset"})]})]})]})})]})})})]})}},6463:function(e,a,s){"use strict";var l=s(1169);s.o(l,"usePathname")&&s.d(a,{usePathname:function(){return l.usePathname}}),s.o(l,"useRouter")&&s.d(a,{useRouter:function(){return l.useRouter}})}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=2453)}),_N_E=e.O()}]);